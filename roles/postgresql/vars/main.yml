---

postgresql_server: postgresql

postgresql_data_dir: "/var/lib/postgresql/{{ postgresql_version }}/main"

postgresql_bin_path: "/usr/lib/postgresql/{{ postgresql_version }}/bin"
postgresql_config_path: "/etc/postgresql/{{ postgresql_version }}/main"
postgresql_daemon: "postgresql@{{ postgresql_version }}-main"

postgresql_dependencies: []

postgresql_packages:
  - postgresql
  - postgresql-contrib
  - libpq-dev

postgresql_python_library:
  - python3-psycopg2


postgresql_defaults_config_connections:
  listen_addresses: []
  port: ""
  max_connections: ""
  reserved_connections: ""
  superuser_reserved_connections: ""
  unix:
    socket:
      directories: []
        # - /run/postgresql
        # - /run/postgre
      group: ""
      permissions: "0755"
  bonjour:
    enabled: false
    name: ""
  tcp:
    keepalives:
      idle: ""
      interval: ""
      count: ""
    user:
      timeout: ""
  client_connection_check_interval: ""

postgresql_defaults_config_authentication:
  authentication_timeout: 1min          # 1s-600s
  password_encryption: "{{ ansible_fips | ternary('scram-sha-256', 'md5') }}"    # scram-sha-256 or md5
  scram_iterations: 4096
  # GSSAPI using Kerberos
  krb:
    server_keyfile: 'FILE:${sysconfdir}/krb5.keytab'
    caseins_users: false
  gss:
    accept_delegation: false
  # - SSL -
  ssl:
    enabled: false
    ca_file: ''
    cert_file: 'server.crt'
    crl_file: ''
    crl_dir: ''
    key_file: 'server.key'
    ciphers:
      - HIGH
      - MEDIUM
      - "+3DES"
      - "!aNULL"       # allowed SSL ciphers
    prefer_server_ciphers: true
    ecdh_curve: 'prime256v1'
    min_protocol_version: 'TLSv1.2'
    max_protocol_version: ''
    dh_params_file: ''
    passphrase_command: ''
    passphrase_command_supports_reload: false

# config
postgresql_defaults_config_autovacuum:
  enabled: true                         # Enable autovacuum subprocess?  'on'
                                        # requires track_counts to also be on.
  max_workers: 3                        # max number of autovacuum subprocesses
                                        # (change requires restart)
  naptime: 1min                         # time between autovacuum runs
  vacuum_threshold: 50                  # min number of row updates before
                                        # vacuum
  vacuum_insert_threshold: 1000         # min number of row inserts
                                        # before vacuum; -1 disables insert
                                        # vacuums
  analyze_threshold: 50                 # min number of row updates before
                                        # analyze
  vacuum_scale_factor: 0.2              # fraction of table size before vacuum
  vacuum_insert_scale_factor: 0.2       # fraction of inserts over table
                                        # size before insert vacuum
  analyze_scale_factor: 0.1             # fraction of table size before analyze
  freeze_max_age: 200000000             # maximum XID age before forced vacuum
                                        # (change requires restart)
  multixact_freeze_max_age: 400000000   # maximum multixact age
                                        # before forced vacuum
                                        # (change requires restart)
  vacuum_cost_delay: 2ms                # default vacuum cost delay for
                                        # autovacuum, in milliseconds;
                                        # -1 means use vacuum_cost_delay
  vacuum_cost_limit: -1                 # default vacuum cost limit for
                                        # autovacuum, -1 means use
                                        # vacuum_cost_limit

postgresql_defaults_config_client_connection:
  statement_behavior:
    client_min_messages: notice                   # error, warning, notice, log, debug1, ... , debug5
    check_function_bodies: true
    default:
      table_access_method: 'heap'
      tablespace: ''                        # a tablespace name, '' uses the default
      toast_compression: 'pglz'             # 'pglz' or 'lz4'
      transaction:
        isolation: 'read committed'
        read_only: false
        deferrable: false
    lock_timeout: 0                               # in milliseconds, 0 is disabled
    idle:
      in_transaction_session_timeout: 0        # in milliseconds, 0 is disabled
      session_timeout: 0                       # in milliseconds, 0 is disabled
    vacuum:
      freeze:
        table_age: 150000000
        min_age: 50000000
      failsafe_age: 1600000000
    multixact:
      freeze:
        table_age: 150000000
        min_age: 5000000
      failsafe_age: 1600000000
    bytea_output: 'hex'                   # hex, escape
    xmlbinary: 'base64'
    xmloption: 'content'
    gin_pending_list_limit: 4MB
    createrole_self_grant: ''             # set and/or inherit
    event_triggers: true
    row_security: true
    session_replication_role: 'origin'
    statement_timeout: 0                          # in milliseconds, 0 is disabled
    search_path:                                  # schema names
      - '"$user"'                                 #
      - 'public'                                  #
    temp_tablespaces: ''                          # a list of tablespace names, '' uses
                                                  # only default tablespace
    transaction_timeout: 0                        # in milliseconds, 0 is disabled
  locale_and_formatting:
    datestyle:
      - iso
      - mdy
    intervalstyle: 'postgres'
    timezone: UTC
    timezone_abbreviations: 'Default'       # Select the set of available time zone
                                            # abbreviations.  Currently, there are
                                            #   Default
                                            #   Australia (historical usage)
                                            #   India
                                            # You can create your own file in
                                            # share/timezonesets/.
    extra_float_digits: 1                   # min -15, max 3; any value >0 actually
                                            # selects precise output mode
    client_encoding: sql_ascii              # actually, defaults to database
                                            # encoding

    # These settings are initialized by initdb, but they can be changed.
    lc_messages: 'C.UTF-8'                  # locale for system error message
                                            # strings
    lc_monetary: 'C.UTF-8'                  # locale for monetary formatting
    lc_numeric: 'C.UTF-8'                   # locale for number formatting
    lc_time: 'C.UTF-8'                      # locale for time formatting

    icu_validation_level: warning           # report ICU locale validation
                                            # errors at the given level
    # default configuration for text search
    default_text_search_config: 'pg_catalog.english'
  preloading:
    local_preload_libraries: ''
    session_preload_libraries: ''
    shared_preload_libraries: ''            # (change requires restart)
    jit_provider: 'llvmjit'                 # JIT library to use
    dynamic_library_path: '$libdir'
    gin_fuzzy_search_limit: 0

postgresql_defaults_config_compatibility:
  array_nulls: true
  backslash_quote: safe_encoding        # on, off, or safe_encoding
  escape_string_warning: true
  lo_compat_privileges: false
  quote_all_identifiers: false
  standard_conforming_strings: true
  synchronize_seqscans: true
  # - Other Platforms and Clients -
  transform_null_equals: false
  allow_alter_system: true

postgresql_defaults_config_error_handling:
  exit_on_error: false                    # terminate session on any error?
  restart_after_crash: true               # reinitialize after backend crash?
  data_sync_retry: false                  # retry or panic on failure to fsync
                                          # data?
                                          # (change requires restart)
  recovery_init_sync_method: fsync        # fsync, syncfs (Linux 5.8+)

postgresql_defaults_config_file_locations:
  data_directory: "{{ postgresql_data_dir }}"                      # 'ConfigDir'           # use data in another directory
                                         # (change requires restart)
  hba_file: ""                            # 'ConfigDir/pg_hba.conf'     # host-based authentication file
                                         # (change requires restart)
  ident_file: ""                          # 'ConfigDir/pg_ident.conf' # ident configuration file
                                         # (change requires restart)

  # If external_pid_file is not explicitly set, no extra PID file is written.
  external_pid_file: ''                 # write an extra PID file
                                         # (change requires restart)

postgresql_defaults_config_lock_management:
  deadlock_timeout: 1s
  max_locks_per_transaction: 64         # min 10
                                         # (change requires restart)
  max_pred_locks_per_transaction: 64    # min 10
                                         # (change requires restart)
  max_pred_locks_per_relation: -2       # negative values mean
                                         # (max_pred_locks_per_transaction
                                         #  / -max_pred_locks_per_relation) - 1
  max_pred_locks_per_page: 2            # min 0

postgresql_defaults_config_query_tuning:
  # - Planner Method Configuration -
  enable_async_append: true
  enable_bitmapscan: true
  enable_gathermerge: true
  enable_hashagg: true
  enable_hashjoin: true
  enable_incremental_sort: true
  enable_indexscan: true
  enable_indexonlyscan: true
  enable_material: true
  enable_memoize: true
  enable_mergejoin: true
  enable_nestloop: true
  enable_parallel_append: true
  enable_parallel_hash: true
  enable_partition_pruning: true
  enable_partitionwise_join: false
  enable_partitionwise_aggregate: false
  enable_presorted_aggregate: true
  enable_seqscan: true
  enable_sort: true
  enable_tidscan: true
  enable_group_by_reordering: true
  # - Planner Cost Constants -
  seq_page_cost: 1.0                    # measured on an arbitrary scale
  random_page_cost: 4.0                 # same scale as above
  cpu_tuple_cost: 0.01                  # same scale as above
  cpu_index_tuple_cost: 0.005           # same scale as above
  cpu_operator_cost: 0.0025             # same scale as above
  parallel_setup_cost: 1000.0           # same scale as above
  parallel_tuple_cost: 0.1              # same scale as above
  min_parallel_table_scan_size: 8MB
  min_parallel_index_scan_size: 512kB
  effective_cache_size: 4GB

  jit_above_cost: 100000                # perform JIT compilation if available
                                        # and query more expensive than this;
                                        # -1 disables
  jit_inline_above_cost: 500000         # inline small functions if query is
                                        # more expensive than this; -1 disables
  jit_optimize_above_cost: 500000       # use expensive JIT optimizations if
                                        # query is more expensive than this;
                                        # -1 disables
  # - Genetic Query Optimizer -
  geqo: true
  geqo_threshold: 12
  geqo_effort: 5                        # range 1-10
  geqo_pool_size: 0                     # selects default based on effort
  geqo_generations: 0                   # selects default based on effort
  geqo_selection_bias: 2.0              # range 1.5-2.0
  geqo_seed: 0.0                        # range 0.0-1.0

  # - Other Planner Options -
  default_statistics_target: 100        # range 1-10000
  constraint_exclusion: partition       # on, off, or partition
  cursor_tuple_fraction: 0.1            # range 0.0-1.0
  from_collapse_limit: 8
  jit: true                               # allow JIT compilation
  join_collapse_limit: 8                # 1 disables collapsing of explicit
                                         # JOIN clauses
  plan_cache_mode: auto                 # auto, force_generic_plan or
                                         # force_custom_plan
  recursive_worktable_factor: 10.0      # range 0.001-1000000

postgresql_defaults_config_replication:
  # - Sending Servers -
  # Set these on the primary and on any standby that will send replication data.
  sender:
    max_wal_senders: 10           # max number of walsender processes
                                   # (change requires restart)
    max_replication_slots: 10     # max number of replication slots
                                   # (change requires restart)
    wal_keep_size: 0              # in megabytes; 0 disables
    max_slot_wal_keep_size: -1    # in megabytes; -1 disables
    wal_sender_timeout: 60s       # in milliseconds; 0 disables
    track_commit_timestamp: false   # collect timestamp of transaction commit
  # - Primary Server -
  # These settings are ignored on a standby server.
  primary:
    synchronous_standby_names: []       # standby servers that provide sync rep
                                        # method to choose sync standbys, number of sync standbys,
                                        # and comma-separated list of application_name
                                        # from standby(s); '*': all
    synchronized_standby_slots: []      # streaming replication standby server slot
                                        # names that logical walsender processes will wait for
  # - Standby Servers -
  # These settings are ignored on a primary server.
  standby:

    primary_conninfo: ''                  # connection string to sending server
    primary_slot_name: ''                 # replication slot on sending server
    hot_standby: true                       # "off" disallows queries during recovery
                                           # (change requires restart)
    hot_standby_feedback: false             # send info from standby to prevent
                                           # query conflicts
    max_standby_archive_delay: 30s        # max delay before canceling queries
                                           # when reading WAL from archive;
                                           # -1 allows indefinite delay
    max_standby_streaming_delay: 30s      # max delay before canceling queries
                                           # when reading streaming WAL;
                                           # -1 allows indefinite delay
    wal_receiver_create_temp_slot: false    # create temp slot if primary_slot_name
                                           # is not set
    wal_receiver_status_interval: 10s     # send replies at least this often
                                           # 0 disables
    wal_receiver_timeout: 60s             # time that receiver waits for
                                           # communication from primary
                                           # in milliseconds; 0 disables
    wal_retrieve_retry_interval: 5s       # time to wait before retrying to
                                           # retrieve WAL after a failed attempt
    recovery_min_apply_delay: 0           # minimum delay for applying changes during recovery
    sync_replication_slots: false           # enables slot synchronization on the physical standby from the primary
  # - Subscribers -
  # These settings are ignored on a publisher.
  subscribers:
    max_logical_replication_workers: 4    # taken from max_worker_processes
                                           # (change requires restart)
    max_sync_workers_per_subscription: 2  # taken from max_logical_replication_workers
    max_parallel_apply_workers_per_subscription: 2        # taken from max_logical_replication_workers

postgresql_defaults_config_reporting:
  log_destination: 'jsonlog'             # Valid values are combinations of
                                          # stderr, csvlog, jsonlog, syslog, and
                                          # eventlog, depending on platform.
                                          # csvlog and jsonlog require
                                          # logging_collector to be on.

  # This is used when logging to stderr:
  logging_collector: false                # Enable capturing of stderr, jsonlog,
                                          # and csvlog into log files. Required
                                          # to be on for csvlogs and jsonlogs.
                                          # (change requires restart)

  # These are only used if logging_collector is on:
  log_directory: 'log'                  # directory where log files are written,
                                         # can be absolute or relative to PGDATA
  log_filename: 'postgresql-%Y-%m-%d_%H%M%S.log'        # log file name pattern,
                                                         # can include strftime() escapes
  log_file_mode: '0600'                   # creation mode for log files,
                                         # begin with 0 to use octal notation
  log_rotation_age: 1d                  # Automatic rotation of logfiles will
                                         # happen after that time.  0 disables.
  log_rotation_size: 10MB               # Automatic rotation of logfiles will
                                         # happen after that much log output.
                                         # 0 disables.
  log_truncate_on_rotation: false         # If on, an existing log file with the
                                          # same name as the new log file will be
                                          # truncated rather than appended to.
                                          # But such truncation only occurs on
                                          # time-driven rotation, not on restarts
                                          # or size-driven rotation.  Default is
                                          # off, meaning append to existing files
                                          # in all cases.
  syslog:
  # These are relevant when logging to syslog:
    facility: 'LOCAL0'
    ident: 'postgres'
    sequence_numbers: true
    split_messages: true

  windows:
    # This is only relevant when logging to eventlog (Windows):
    # (change requires restart)
    event_source: 'PostgreSQL'

  # - When to Log -
  log_min_messages: info             # values in order of decreasing detail:
                                          #   debug5
                                          #   debug4
                                          #   debug3
                                          #   debug2
                                          #   debug1
                                          #   info
                                          #   notice
                                          #   warning
                                          #   error
                                          #   log
                                          #   fatal
                                          #   panic

  log_min_error_statement: error        # values in order of decreasing detail:
                                          #   debug5
                                          #   debug4
                                          #   debug3
                                          #   debug2
                                          #   debug1
                                          #   info
                                          #   notice
                                          #   warning
                                          #   error
                                          #   log
                                          #   fatal
                                          #   panic (effectively off)

  log_min_duration_statement: -1        # -1 is disabled, 0 logs all statements
                                          # and their durations, > 0 logs only
                                          # statements running at least this number
                                          # of milliseconds

  log_min_duration_sample: -1           # -1 is disabled, 0 logs a sample of statements
                                          # and their durations, > 0 logs only a sample of
                                          # statements running at least this number
                                          # of milliseconds;
                                          # sample fraction is determined by log_statement_sample_rate

  log_statement_sample_rate: 1.0        # fraction of logged statements exceeding
                                          # log_min_duration_sample to be logged;
                                          # 1.0 logs all such statements, 0.0 never logs


  log_transaction_sample_rate: 0.0      # fraction of transactions whose statements
                                          # are logged regardless of their duration; 1.0 logs all
                                          # statements from all transactions, 0.0 never logs

  log_startup_progress_interval: 10s    # Time between progress updates for
                                          # long-running startup operations.
                                          # 0 disables the feature, > 0 indicates
                                          # the interval in milliseconds.

  # - What to Log -
  debug_print_parse: false
  debug_print_rewritten: false
  debug_print_plan: false
  debug_pretty_print: true
  log_autovacuum_min_duration: 10min    # log autovacuum activity;
                                          # -1 disables, 0 logs all actions and
                                          # their durations, > 0 logs only
                                          # actions running at least this number
                                          # of milliseconds.
  log_checkpoints: true
  log_connections: true
  log_disconnections: false
  log_duration: false
  log_error_verbosity: default          # terse, default, or verbose messages
  log_hostname: true
  log_line_prefix: '%t [%p]'
                                          # special values:
                                          #   %a: application name
                                          #   %u: user name
                                          #   %d: database name
                                          #   %r: remote host and port
                                          #   %h: remote host
                                          #   %b: backend type
                                          #   %p: process ID
                                          #   %P: process ID of parallel group leader
                                          #   %t: timestamp without milliseconds
                                          #   %m: timestamp with milliseconds
                                          #   %n: timestamp with milliseconds (as a Unix epoch)
                                          #   %Q: query ID (0 if none or not computed)
                                          #   %i: command tag
                                          #   %e: SQL state
                                          #   %c: session ID
                                          #   %l: session line number
                                          #   %s: session start timestamp
                                          #   %v: virtual transaction ID
                                          #   %x: transaction ID (0 if none)
                                          #   %q: stop here in non-session
                                          #        processes
                                          #   %%: '%'
                                          # e.g. '<%u%%%d> '
  log_lock_waits: false                   # log lock waits >= deadlock_timeout
  log_recovery_conflict_waits: false      # log standby recovery conflict waits
                                          # >= deadlock_timeout
  log_parameter_max_length: -1          # when logging statements, limit logged
                                          # bind-parameter values to N bytes;
                                          # -1 means print in full, 0 disables
  log_parameter_max_length_on_error: 0  # when logging an error, limit logged
                                          # bind-parameter values to N bytes;
                                          # -1 means print in full, 0 disables
  log_statement: 'none'                 # none, ddl, mod, all
  log_replication_commands: false
  log_temp_files: -1                    # log temporary files equal or larger
                                          # than the specified size in kilobytes;
                                          # -1 disables, 0 logs all temp files
  log_timezone: UTC

  # - Process Title -
  cluster_name: ''                      # added to process titles if nonempty
                                          # (change requires restart)
  update_process_title: true

postgresql_defaults_config_ressources:
  memory:
    shared_buffers: 128MB                  # min 128kB
                                            # (change requires restart)
    huge_pages: try                       # on, off, or try
                                            # (change requires restart)
    huge_page_size: 0                     # zero for system default
                                            # (change requires restart)
    temp_buffers: 8MB                     # min 800kB
    max_prepared_transactions: 0          # zero disables the feature
                                            # (change requires restart)
    # Caution: it is not advisable to set max_prepared_transactions nonzero unless
    # you actively intend to use prepared transactions.
    work_mem: 4MB                         # min 64kB
    hash_mem_multiplier: 2.0              # 1-1000.0 multiplier on hash table work_mem
    maintenance_work_mem: 64MB            # min 64kB
    autovacuum_work_mem: -1               # min 64kB, or -1 to use maintenance_work_mem
    logical_decoding_work_mem: 64MB       # min 64kB
    max_stack_depth: 2MB                  # min 100kB
    shared_memory_type: mmap              # the default is the first option
                                            # supported by the operating system:
                                            #   mmap
                                            #   sysv
                                            #   windows
                                            # (change requires restart)
    dynamic_shared_memory_type: posix      # the default is usually the first option
                                            # supported by the operating system:
                                            #   posix
                                            #   sysv
                                            #   windows
                                            #   mmap
                                            # (change requires restart)
    min_dynamic_shared_memory: 0MB        # (change requires restart)
    vacuum_buffer_usage_limit: 2MB        # size of vacuum and analyze buffer access strategy ring;
                                            # 0 to disable vacuum buffer access strategy;
                                            # range 128kB to 16GB

    # SLRU buffers (change requires restart)
    commit_timestamp_buffers: 0           # memory for pg_commit_ts (0: auto)
    multixact_offset_buffers: 16          # memory for pg_multixact/offsets
    multixact_member_buffers: 32          # memory for pg_multixact/members
    notify_buffers: 16                    # memory for pg_notify
    serializable_buffers: 32              # memory for pg_serial
    subtransaction_buffers: 0             # memory for pg_subtrans (0: auto)
    transaction_buffers: 0                # memory for pg_xact (0: auto)
  disk:
    temp_file_limit: -1                   # limits per-process temp file space
                                             # in kilobytes, or -1 for no limit
    max_notify_queue_pages: 1048576       # limits the number of SLRU pages allocated
                                        # for NOTIFY / LISTEN queue
  kernel:
    max_files_per_process: 1000           # min 64
  vacuum:
    vacuum_cost_delay: 0                  # 0-100 milliseconds (0 disables)
    vacuum_cost_page_hit: 1               # 0-10000 credits
    vacuum_cost_page_miss: 2              # 0-10000 credits
    vacuum_cost_page_dirty: 20            # 0-10000 credits
    vacuum_cost_limit: 200                # 1-10000 credits
  bgwriter:
    bgwriter_delay: 200ms                 # 10-10000ms between rounds
    bgwriter_lru_maxpages: 100            # max buffers written/round, 0 disables
    bgwriter_lru_multiplier: 2.0          # 0-10.0 multiplier on buffers scanned/round
    bgwriter_flush_after: 512kB           # measured in pages, 0 disables
  async_behavior:
    backend_flush_after: 0                # measured in pages, 0 disables
    effective_io_concurrency: 1           # 1-1000; 0 disables prefetching
    maintenance_io_concurrency: 10        # 1-1000; 0 disables prefetching
    io_combine_limit: 128kB               # usually 1-32 blocks (depends on OS)
    max_worker_processes: 8               # (change requires restart)
    max_parallel_workers_per_gather: 2    # limited by max_parallel_workers
    max_parallel_maintenance_workers: 2   # limited by max_parallel_workers
    max_parallel_workers: 8               # number of max_worker_processes that
                                           # can be used in parallel operations
    parallel_leader_participation: true

postgresql_defaults_config_statistics:
  # - Cumulative Query and Index Statistics -
  track_activities: true
  track_activity_query_size: 1024       # (change requires restart)
  track_counts: true
  track_io_timing: false
  track_wal_io_timing: false
  track_functions: none                 # none, pl, all
  stats_fetch_consistency: cache        # cache, none, snapshot
  # - Monitoring -
  compute_query_id: auto
  log_statement_stats: false
  log_parser_stats: false
  log_planner_stats: false
  log_executor_stats: false

postgresql_defaults_config_write_ahead:
  # - Settings -
  settings:
    wal_level: replica                    # minimal, replica, or logical
                                            # (change requires restart)
    wal_sync_method: fdatasync                # the default is the first option
                                            # supported by the operating system:
                                            #   open_datasync
                                            #   fdatasync (default on Linux and FreeBSD)
                                            #   fsync
                                            #   fsync_writethrough
                                            #   open_sync
    wal_log_hints: false                    # also do full page writes of non-critical updates
                                           # (change requires restart)
    wal_compression: lz4                  # enables compression of full-page writes;
                                           # off, pglz, lz4, zstd, or on
    wal_init_zero: true                     # zero-fill new WAL files
    wal_recycle: true                       # recycle WAL files
    wal_buffers: -1                       # min 32kB, -1 sets based on shared_buffers
                                           # (change requires restart)
    wal_writer_delay: 200ms               # 1-10000 milliseconds
    wal_writer_flush_after: 1MB           # measured in pages, 0 disables
    wal_skip_threshold: 2MB
    fsync: true                             # flush data to disk for crash safety
                                            # (turning this off can cause
                                            # unrecoverable data corruption)
    synchronous_commit: true                # synchronization level;
                                            # off, local, remote_write, remote_apply, or on
    full_page_writes: true                  # recover from partial page writes

    commit_delay: 0                       # range 0-100000, in microseconds
    commit_siblings: 5                    # range 1-1000

  # - Checkpoints -
  checkpoint:
    timeout: 5min              # range 30s-1d
    completion_target: 0.9     # checkpoint target duration, 0.0 - 1.0
    flush_after: 256kB         # measured in pages, 0 disables
    warning: 30s               # 0 disables
    wal_size:
      max: 1GB
      min: 80MB

  # - Prefetching during recovery -
  prefetch:
    recovery_prefetch: try        # prefetch pages referenced in the WAL?
    wal_decode_buffer_size: 512kB # lookahead window used for prefetching
                                  # (change requires restart)

  # - Archiving -
  archive:
    archive_mode: false             # enables archiving; off, on, or always
                                   # (change requires restart)
    archive_library: ''           # library to use to archive a WAL file
                                   # (empty string indicates archive_command should
                                   # be used)
    archive_command: ''           # command to use to archive a WAL file
                                   # placeholders: %p: path of file to archive
                                   #               %f: file name only
                                   # e.g. 'test ! -f /mnt/server/archivedir/%f && cp %p /mnt/server/archivedir/%f'
    archive_timeout: 0            # force a WAL file switch after this
                                  # number of seconds; 0 disables

  # - Archive Recovery -
  archive_recovery:
    # These are only used in recovery mode.

    restore_command: ''           # command to use to restore an archived WAL file
                                    # placeholders: %p: path of file to restore
                                    #               %f: file name only
                                    # e.g. 'cp /mnt/server/archivedir/%f %p'
    archive_cleanup_command: ''   # command to execute at every restartpoint
    recovery_end_command: ''      # command to execute at completion of recovery

  # - Recovery Target -
  recovery_target:
    # Set these only when performing a targeted recovery.

    recovery_target: ''           # 'immediate' to end recovery as soon as a
                                   # consistent state is reached
                                   # (change requires restart)
    recovery_target_name: ''      # the named restore point to which recovery will proceed
                                   # (change requires restart)
    recovery_target_time: ''      # the time stamp up to which recovery will proceed
                                   # (change requires restart)
    recovery_target_xid: ''       # the transaction ID up to which recovery will proceed
                                   # (change requires restart)
    recovery_target_lsn: ''       # the WAL LSN up to which recovery will proceed
                                   # (change requires restart)
    recovery_target_inclusive: true # Specifies whether to stop:
                                   # just after the specified recovery target (on)
                                   # just before the recovery target (off)
                                   # (change requires restart)
    recovery_target_timeline: 'latest'    # 'current', 'latest', or timeline ID
                                           # (change requires restart)
    recovery_target_action: 'pause'       # 'pause', 'promote', 'shutdown'
                                          # (change requires restart)

  # - WAL Summarization -
  summarize:
    summarize_wal: false            # run WAL summarizer process?
    wal_summary_keep_time: '10d'  # when to remove old summary files, 0: never

postgresql_defaults_config_wal: {}


postgresql_installed: false

systemd_lib_directory: /lib/systemd/system  # noqa var-naming[no-role-prefix]

...
